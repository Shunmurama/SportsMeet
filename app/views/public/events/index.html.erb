<div class="container">
 <div class="mt-4 mb-3 text-center"><h4>イベント一覧</h4></div>

  <div class="row">
    <div class="col-md-4 mt-5">
      <div class="card">
       <div class="card-header text-center">検索</div>
        <div class="card-body">
          <%= form_with url: event_result_path(@events), method: :get, class: "form-inline justify-content-between" do |f| %>
            <div class="form-group mb-2">
              <%= f.text_field :keyword, class: "form-control", placeholder: "キーワードを入力" %>
            </div>
            <div class="form-group mx-sm-2 mb-2">
              <%= f.date_field :start_date, class: "form-control", placeholder: "日にちを選択", value: Date.today %>
            </div>
            <div class="form-group">
              <%= f.collection_check_boxes :category_ids, Category.all, :id, :name %>
            </div>
            <div class="form-group mb-2">
              <%= f.submit "検索", class: "btn btn-primary" %>
            </div>
          <% end %>
        </div>
      </div>
    </div>

    <div class="col-md-8">
      <div class="container mt-4">
        <div class="row">
          <% @events.each do |event| %>
            <div class="col-md-12 mt-2 border">
              <div class="row">
                <div class="col">
                  <%= link_to event_path(event.id) do %>
                    <% if event.image.attached? %>
                      <%= image_tag event.image, size: "250x250" %>
                    <% else %>
                      <%= image_tag 'no_image', size: "250x250" %>
                    <% end %>
                  <% end %>
                </div>
                <div class="col mt-2">
                  <div class="ml-1 mt-1"><%= link_to event.name, event_path(event.id) %></div>
                  <% event.event_categories.each do |ec| %>
                    <span class="badge badge-primary mr-2"><%= ec.category.name %></span>
                  <% end %>
                  <div class="ml-1 mt-1">開催日時：<%= event.date %></div>
                  <div class="ml-1 mt-1">募集人数：<%= event.number %>人</div>
                  <div class="ml-1 mt-1">開催地：<%= Prefecture.names.invert[event.prefecture_id] %></div>
                  <div class="ml-1 mt-1"><イベント概要><br>
                    <% if event.outline.length > 40 %>
                      <%= event.outline[0, 40] + "..." %>
                    <% else %>
                      <%= event.outline %>
                    <% end %>
                  </div>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>

  </div>
</div>